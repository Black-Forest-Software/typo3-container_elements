<html lang="en" data-namespace-typo3-fluid="true"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="https://typo3.org/ns/TYPO3/Fluid/ViewHelpers"
      xmlns:v="https://typo3.org/ns/FluidTYPO3/Vhs/ViewHelpers">

{v:content.resources.fal(field: 'flexform_imageReference', record: data)
    -> v:iterator.first()
    -> f:variable(name: '_image')}
<f:if condition="{_image}">
    {f:variable(name: '_imageClasses', value: 'card-img')}
    <f:if condition="{data.pi_flexform.imagePosition} == 'top' || {data.pi_flexform.imagePosition} == 'bottom'">
        {f:variable(name: '_imageClasses', value: 'card-img-{data.pi_flexform.imagePosition}')}
    </f:if>
    <f:if condition="{data.pi_flexform.imageClasses}">
        {f:variable(name: '_imageClasses', value: '{_imageClasses} {data.pi_flexform.imageClasses}')}
    </f:if>
    <f:image class="{_imageClasses}" treatIdAsReference="1" src="{_image.id}" crop="{_image.crop}"
             title="{_image.title}" alt="{_image.alternative}" width="{data.pi_flexform.imageWidth}"/>
</f:if>
<f:if condition="{children_201}">
    <div class="cec-image-wrap">
        <f:for each="{children_201}" as="record">
            <f:format.raw>{record.renderedContent}</f:format.raw>
        </f:for>
    </div>
</f:if>

</html>
